<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Luisfigook.GitHub.io : luisfigook技术blog">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Luisfigook.GitHub.io</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/luisfigook">View on GitHub</a>

          <h1 id="project_title">Luisfigook.GitHub.io</h1>
          <h2 id="project_tagline">luisfigook技术blog</h2>

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>今天用PHP GD生成图片，取远程微信头像，发现用file_get_contents函数取很慢，后来发现用curl获取很快，所以分享下：   </p>

<p><code>$avatar_url = "http://wx.qlogo.cn/mmopen/Z8QF8O0IACNgJkRJz4wJISKfQgbCVJTDxMLd0ib8ED2a5BgDry3pBufX9UASMKvVY2CffsgmOppvEgpGA2DFG3jyxsicGgecHG/0";</code>
        <code>$this-&gt;load-&gt;library('Curl');</code>
        <code>$avatar = $this-&gt;curl-&gt;simple_get($avatar_url);</code>
        <code>$source = imagecreatefromstring($avatar);</code>
        <code>$size =  getimagesizefromstring($avatar);</code>
        <code>imagecopyresized($bg, $source, 23, 32, 0, 0, 87, 87, $size[0], $size[1]);</code>
        <code>// 输出图像</code>
        <code>header("Content-type: image/jpeg");</code>
        <code>imagejpeg($bg);</code></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
